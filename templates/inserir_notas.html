{% extends "model.html" %}

{% block title %}
    <title>SGA - Inserir notas</title>
{% endblock %}

{% block content %}

    <h2>Inserir nota de Aluno</h2>
    <form class="form" method="post">
        <label class="label-input" for="matricula_aluno">
            <i class="far fa-user icon-modify"></i>
            <input type="text" placeholder="Matricula do aluno:" name="matricula_aluno" required>
        </label>
        <button class="btn btn-second">Buscar Aluno</button>        
    </form>

{% if aluno %}
    <h2>Notas para o Aluno: {{ aluno.nome }}</h2>

    <form method="POST">
        <input type="hidden" name="matricula_aluno" value="{{ aluno.matricula }}">

        {% for disciplina in disciplinas %}
            <label for="nota_{{ disciplina.id }}">{{ disciplina.nome }}:</label>

            {% set nota_existente = None %}
            {% for nota in aluno.notas %}
                {% if nota.disciplina_id == disciplina.id %}
                    {% set nota_existente = nota %}
                {% endif %}
            {% endfor %}

            <input type="number" name="nota_{{ disciplina.id }}"
                   value="{{ nota_existente.valor if nota_existente else '' }}"
                   step="0.1" min="0" max="10" required>
            <br>
        {% endfor %}

        <button type="submit">Salvar Notas</button>
    </form>
{% endif %}

{% endblock %}
